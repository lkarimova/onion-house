<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Onion House</title>
    <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.3.0/model-viewer.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background-color: #EBFBFF;
            color: #002A33;
            line-height: 1.6;
            margin: 0;
            padding: 0;
            overflow: hidden;
            height: 100vh;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 60px 20px;
        }

        /* Breadcrumbs */
        .breadcrumbs {
            margin-bottom: 30px;
            font-size: 14px;
        }

        .breadcrumbs a {
            color: #006FFF;
            text-decoration: none;
        }

        .breadcrumbs a:hover {
            text-decoration: underline;
        }

        .breadcrumbs span {
            margin: 0 8px;
            color: #999;
        }

        .columns {
            display: flex;
            gap: 220px;
            align-items: flex-start;
        }

        .column {
          flex: 1;
          min-width: 0;
        } 

         /* Make these containers capable of holding a background layer */
        .interaction-helper,
        .interaction-helper-mobile {
          position: relative;
          overflow: hidden;
        }

        .interaction-helper {
          position: fixed;
          top: 10px;
          left: 0;
          right: 0;
          margin: 0 auto;  
          max-width: 1000px;
          padding: 10px 20px;  
          display: inline-flex;
          align-items: flex-start;
          justify-content: center;
          gap: 24px;
          z-index: 3;
          border-radius: 15px;
          background: rgba(255, 255, 255, 0.15);
          backdrop-filter: blur(8px) saturate(180%);
          border: 1px solid rgba(255, 255, 255, 0.3);
          box-shadow: 0 8px 32px rgba(31, 38, 135, 0.2), inset 0 4px 20px rgba(255, 255, 255, 0.1);  
        }

        /* Liquid glass background behind desktop helper */
        .interaction-helper::before {
          content: "";
          position: absolute;
          inset: 0;
          border-radius: inherit;
          background: rgba(255, 255, 255, 0.15);
          pointer-events: none;
          z-index: -1;
        }

        .helper-block {
          display: flex;
          align-items: flex-end;
          gap: 10px;
        }

        .helper-icon {
          width: 30px;
          height: 30px;
          display: block;
          opacity: 0.6;  
        }
    
        .helper-icon-text {
          display: flex;
          align-items: flex-end;
          gap: 4px;
        }

        .helper-text {
          line-height: 1;
          display: inline-flex;
          flex-direction: column;
          gap: 0;
        }

        .helper-title {
          font-size: 12px;
          font-weight: 600;
          opacity: 0.8;
        }
        
        .helper-desc {
          line-height: 1;
          margin: 0;
          font-size: 12px;
          font-weight: 400;
          opacity: 0.8;
        }

        .helper-keys {
          display: flex;
          align-items: center;
          gap: 4px;
        }

        /* Keycaps */
        .helper-key {
          width: 26px;
          height: 26px;
          padding: 0;
          border-radius: 6px;
          border: 1px solid rgba(0, 0, 0, 0.18);
          background: radial-gradient(circle at top left, #ffffff, #e0e7ff);
          box-shadow: 0 2px 0 rgba(0, 0, 0, 0.2);
          display: inline-flex;
          align-items: center;
          justify-content: center;
          font-size: 14px;
          font-weight: 400;
          color: #111;
          cursor: pointer;
          transition: transform 0.1s ease, box-shadow 0.1s ease, background 0.1s ease;
        }

        .helper-key:hover {
          background: radial-gradient(circle at top left, #ffffff, #d7e0ff);
        }

        .helper-key:active,
        .helper-key.is-pressed {
          transform: translateY(1px);
          box-shadow: 0 1px 0 rgba(0, 0, 0, 0.25);
          background: radial-gradient(circle at bottom right, #f0f2ff, #ced7ff);
        }

        .interaction-helper-mobile {
          display: none;
        }
        
        @media (max-width: 768px) {
          .columns {
            flex-direction: column;
            gap: 8px;
          }
            
          .container {
            padding: 4px 16px 8px;  
          }

          .column p {
            margin-bottom: 10px;
          }  

          header {
            margin-bottom: 10px;
          }
            
          h1 {
            font-size: 18px;
          }

          .inline-heading {
            font-size: 24px;
          }

          .description,
          .column p {
            font-size: 14px;
            text-align: center;
          }  
            
          .columns .column:nth-child(2) {
            display: none;
          } 
            
          .interaction-helper {
            display: none;
          }  

          .interaction-helper-mobile {
            position: fixed;
            top: 10px;
            bottom: auto;
            left: 50%;
            transform: translateX(-50%);
            width: calc(100% - 32px);
            max-width: 1000px;      /* match your container width */
            padding: 8px 10px;
            border-radius: 15px;
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(8px) saturate(180%);
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 8px 32px rgba(31, 38, 135, 0.2), inset 0 4px 20px rgba(255, 255, 255, 0.1); 
            display: inline-flex;
            align-items: flex-start;
            justify-content: center;
            z-index: 3; 
          }

            /* Liquid glass background behind mobile helper */
          .interaction-helper-mobile::before {
            content: "";
            position: absolute;
            inset: 0;
            border-radius: inherit;
            background: rgba(255, 255, 255, 0.15);
            pointer-events: none;
            z-index: -1;
          }

          .mh-row {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 4px;
            width: 100%;
          }

          .mh-item {
            display: flex;
            align-items: center;
            gap: 0;
            min-width: 0;
          }

          .mh-icon {
            width: 28px;
            height: 28px;
            opacity: 0.6;  
          }

          .mh-text {
            display: inline-flex;
            flex-direction: column;
            gap: 0;
          }

          .mh-title {
            font-size: 10px;
            font-weight: 700;
            opacity: 0.8;  
          }

          .mh-desc {
            font-size: 10px;
            font-weight: 400;
            opacity: 0.8;
          }
        }
        
        /* Header */
        header {
            margin-bottom: 10px;
        }

        h1,
        .inline-heading {
          font-size: 42px;
          font-weight: 400;
          line-height: 1.2;  
          letter-spacing: 2px;
          color: #000;
        }

        .inline-heading {
          display: inline;
          margin: 0;
        }

        .description {
            font-family: "SF Mono", Menlo, Monaco, "Courier New", monospace;
            font-weight: 100;
            font-size: 14px;
            line-height: 1.6;
            color: #555;
            margin-bottom: 30px;
        }

        .column p {
            font-family: "SF Mono", Menlo, Monaco, "Courier New", monospace;
            font-weight: 100;
            font-size: 14px;
            line-height: 1.6;
            color: #555;
            margin-bottom: 10px;
        }

        .columns .column:nth-child(2) p {
          text-align: right;
        }

        .homepage-center {
          display: flex;
          align-items: center;      /* vertical centering */
          justify-content: center;  /* optional: horizontal centering */
          min-height: 100vh;        /* make the container fill the viewport */
          z-index: 0;
          position: relative;
          pointer-events: none;     /* keeps your model clickable */
        }

        /* Model Viewer */
        model-viewer {
            background-color: transparent;
        }

        /* Hotspot Styles */
        .hotspot {
            position: relative;
            overflow: hidden;
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(8px) saturate(180%);
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 8px 32px rgba(31, 38, 135, 0.2), inset 0 4px 20px rgba(255, 255, 255, 0.1);
            border-radius: 24px;
            padding: 10px 16px;
            display: flex;
            align-items: center;
            gap: 4px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            text-decoration: none;
            color: inherit;
            min-width: 200px;
        }

        .hotspot::before {
          content: "";
          position: absolute;
          inset: 0;
          border-radius: inherit;
          background: rgba(255, 255, 255, 0.15);
          pointer-events: none;
          z-index: -1;
        }
        
        .hotspot:hover {
            transform: scale(1.05);
        }

        .hotspot-content {
            flex: 1;
            text-align: left;
        }

        .hotspot-category {
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 2px;
            font-weight: 600;
        }

        .hotspot-title {
            font-size: 14px;
            font-weight: 500;
            display: inline-flex;
            align-items: center;
            gap: 4px; /* space between "View" and arrow */
        }

        .hotspot-arrow {
            font-size: 18px;
            font-weight: 300;
        }

        .hotspot.calm .hotspot-category {
            color: #006FFF;
        }

        .hotspot.immersion .hotspot-category {
            color: #7300FF;
        }

        .hotspot.resilience .hotspot-category {
            color: #FF0000;
        }

        /* Content Section */
        .content-section {
            margin: 60px 0;
        }

        .content-section h2 {
            font-size: 32px;
            font-weight: 300;
            margin-bottom: 20px;
            text-align: center;
        }

        .long-description {
            max-width: 800px;
            margin: 0 auto 40px;
            font-size: 16px;
            line-height: 1.8;
            color: #555;
        }

        /* Image Placeholders */
        .image-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 40px;
        }

        .image-placeholder {
            background-color: #D0D0D0;
            aspect-ratio: 16/9;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #888;
            font-size: 14px;
        }

        /* Footer */
        footer {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            text-align: center;
            padding: 40px 20px;
            margin-top: 80px;
            border-top: none; /* previously 1px solid rgba(0, 0, 0, 0.1) */
            font-size: 14px;
            font-weight: 200;
            color: #666;
            pointer-events: none;
            z-index: 1;
        }

        /* Layer-specific backgrounds */
        body.calm-layer {
            background: linear-gradient(135deg, #EBFBFF 0%, rgba(0, 111, 255, 0.1) 100%);
        }

        body.immersion-layer {
            background: linear-gradient(135deg, #EBFBFF 0%, rgba(115, 0, 255, 0.15) 100%);
        }

        body.resilience-layer {
            background: linear-gradient(135deg, #EBFBFF 0%, rgba(255, 0, 0, 0.2) 100%);
        }

        /* Back Link */
        .back-link {
            display: inline-block;
            margin-bottom: 30px;
            color: #006FFF;
            text-decoration: none;
            font-size: 14px;
        }

        .back-link:hover {
            text-decoration: underline;
        }
    </style>
</head>
    
<body>
    <div class="interaction-helper" aria-label="Desktop controls">
      <!-- Rotate -->
      <div class="helper-block">
        <div class="helper-icon-text">
          <img src="icons/rotate.svg" alt="" class="helper-icon" aria-hidden="true" />
          <div class="helper-text">
            <span class="helper-title">Rotate</span>
            <span class="helper-desc">Left-click + drag</span>
          </div>
        </div>
        <div class="helper-keys">
          <button class="helper-key" type="button" data-key="ArrowLeft">←</button>
          <button class="helper-key" type="button" data-key="ArrowUp">↑</button>
          <button class="helper-key" type="button" data-key="ArrowDown">↓</button>
          <button class="helper-key" type="button" data-key="ArrowRight">→</button>
        </div>
      </div>

      <!-- Zoom -->
      <div class="helper-block">
        <div class="helper-icon-text">
          <img src="icons/zoom.svg" alt="" class="helper-icon" aria-hidden="true" />
          <div class="helper-text">
            <span class="helper-title">Zoom</span>
            <span class="helper-desc">Scroll</span>
          </div>
        </div>
        <div class="helper-keys">
          <button class="helper-key" type="button" data-key="+">-</button>
          <button class="helper-key" type="button" data-key="-">+</button>
        </div>
      </div>

      <!-- Move -->
      <div class="helper-block">
        <div class="helper-icon-text">
          <img src="icons/move.svg" alt="" class="helper-icon" aria-hidden="true" />
          <div class="helper-text">
            <span class="helper-title">Move</span>
            <span class="helper-desc">Right-click + drag</span>
          </div>
        </div>
        <div class="helper-keys">
          <button class="helper-key" type="button" data-key="w">W</button>
          <button class="helper-key" type="button" data-key="a">A</button>
          <button class="helper-key" type="button" data-key="s">S</button>
          <button class="helper-key" type="button" data-key="d">D</button>
        </div>
      </div>

      <!-- Reset -->
      <div class="helper-block">
        <div class="helper-icon-text">
          <img src="icons/reset.svg" alt="" class="helper-icon" aria-hidden="true" />
          <div class="helper-text">
            <span class="helper-title">Reset</span>
            <span class="helper-desc">Press R</span>
          </div>
        </div>
        <div class="helper-keys">
          <button class="helper-key" type="button" data-key="r">R</button>
        </div>
      </div>
    </div>

    <!-- Mobile helper -->
    <div class="interaction-helper-mobile" aria-label="Touch controls">
      <div class="mh-row">
        <!-- Zoom -->
        <div class="mh-item">
          <img src="icons/zoom.svg" class="mh-icon" alt="" aria-hidden="true" />
          <div class="mh-text">
            <span class="mh-title">Zoom</span>
            <span class="mh-desc">Pinch</span>
          </div>
        </div>

        <!-- Rotate -->
        <div class="mh-item">
          <img src="icons/rotate.svg" class="mh-icon" alt="" aria-hidden="true" />
          <div class="mh-text">
            <span class="mh-title">Rotate</span>
            <span class="mh-desc">Drag</span>
          </div>
        </div>

        <!-- Move -->
        <div class="mh-item">
          <img src="icons/move.svg" class="mh-icon" alt="" aria-hidden="true" />
          <div class="mh-text">
            <span class="mh-title">Move</span>
            <span class="mh-desc">Pinch + drag</span>
          </div>
        </div>

        <!-- Reset -->
        <div class="mh-item">
          <img src="icons/reset.svg" class="mh-icon" alt="" aria-hidden="true" />
          <div class="mh-text">
            <span class="mh-title">Reset</span>
            <span class="mh-desc">Refresh</span>
          </div>
        </div>
      </div>
    </div>

    <div class="container homepage-center">
      <div class="columns">
        <div class="column">  

        <p>
            The Onion House is a spatial design concept that explores the future of our relationship with technology, specifically in the context of our homes. It's rooted in the idea of extremes, and introduces 3 layers that are linked together with interstitial spaces: 
            (1) the Calm Periphery,
            (2) the Immersion Lab, and
            (3) the Resilient Core. 
            </p>
        
        <p>
            <span class="inline-heading"> The Onion House.</span> The outer layer embraces invisible technology and natural materials. Digital and mechanical systems operate seamlessly in the background, creating an environment of calm technology where interfaces disappear and human experience takes center stage. 
            Natural materials like wood, stone, and living plants create a biophilic sanctuary. Technology remains at the periphery of attention—ambient, responsive, but never demanding. The space harnesses the inherent power of its physical form.
            </p>
       </div>
        
       <div class="column">
        <p>
            The middle layer inverts this logic, making digital technology visible and central. This workspace features 3D projections, interactive screens, and minimal distractions to support deep focus and analytical thinking. 
            </p>    
        <p>       
           <span class="inline-heading"> Spatial Layers.</span> Large projection surfaces transform walls into dynamic workspaces. The environment is minimalist by design—nothing competes for attention except the work itself. Direct exterior access maintains the cognitive state required for focused work. 
                At the core lies a refuge from digital technology—a fail-safe zone with accessible mechanical systems and independent life support. This is the operational headquarters, protected by outer layers, functioning when all else fails. Basic, reliable, and self-sufficient.
            </p>
       </div>
      </div>   
    </div>
    
    <footer style="position: fixed; bottom: 0; left: 0; width: 100%; z-index: 2; background: transparent;">
        © Liza Karimova
    </footer>
    
    <model-viewer 
            src="model.glb"
            camera-controls 
            touch-action="none"
            auto-rotate
            environment-image="legacy"
            exposure="2"
            shadow-intensity="0.5"
            shadow-softness="1"
            tone-mapping="agx"
            camera-orbit="45deg 75deg 30m"
            min-camera-orbit="auto auto 5m"
            max-camera-orbit="auto auto 100m"
            style="position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; z-index: 1;"
            alt="Onion House 3D Model">
           
        <!-- Calm Outer Layer Hotspot -->
            <a href="calm-outer-layer.html" class="hotspot calm" slot="hotspot-1" data-position="3m 3m 3m" data-normal="0m 1m 0m">
                <div class="hotspot-content">
                    <div class="hotspot-category">● Calm Outer Layer →</div>
                </div>
            </a>

            <!-- Immersion Inner Layer Hotspot -->
            <a href="immersion-inner-layer.html" class="hotspot immersion" slot="hotspot-2" data-position="0m 0m 3m" data-normal="0m 1m 0m">
                <div class="hotspot-content">
                    <div class="hotspot-category">● Immersion Inner Layer →</div>
                </div>
            </a>

            <!-- Resilience Core Layer Hotspot -->
            <a href="resilience-core-layer.html" class="hotspot resilience" slot="hotspot-3" data-position="-3m -3m 3m" data-normal="0m 1m 0m">
                <div class="hotspot-content">
                    <div class="hotspot-category">● Resilience Core Layer →</div>
                </div>
            </a>
        </model-viewer>
    <script>
        const modelViewer = document.querySelector('model-viewer');

        let initialOrbit, initialTarget, initialFov;

        modelViewer.addEventListener('load', () => {
            const orbit = modelViewer.getCameraOrbit();
            const target = modelViewer.getCameraTarget();
            initialOrbit = `${orbit.theta}rad ${orbit.phi}rad ${orbit.radius}m`;
            initialTarget = `${target.x}m ${target.y}m ${target.z}m`;
            initialFov = modelViewer.getFieldOfView();
          });

      function resetCamera() {
        if (!initialOrbit) return;
        modelViewer.cameraOrbit = initialOrbit;
        modelViewer.cameraTarget = initialTarget;
        modelViewer.fieldOfView = initialFov;
        // no jumpCameraToGoal() → smoother interpolation with interpolation-decay
      }

      function stepOrbit(direction) {
        const orbit = modelViewer.getCameraOrbit();
        const stepAngle = 0.25; // radians (~14°)
        const stepTilt = 0.2;

        let theta = orbit.theta;
        let phi = orbit.phi;
        const radius = orbit.radius;

        switch (direction) {
          case "left":
            theta -= stepAngle;
            break;
          case "right":
            theta += stepAngle;
            break;
          case "up":
            phi = Math.max(0.1, phi - stepTilt);
            break;
          case "down":
            phi = Math.min(Math.PI - 0.1, phi + stepTilt);
            break;
        }

        modelViewer.cameraOrbit = `${theta}rad ${phi}rad ${radius}m`;
      }
        
      function stepZoom(delta) {
        const orbit = modelViewer.getCameraOrbit();
        let radius = orbit.radius + delta;
        // Clamp roughly within your min/max orbit range
        radius = Math.max(5, Math.min(100, radius));
        modelViewer.cameraOrbit = `${orbit.theta}rad ${orbit.phi}rad ${radius}m`;
      }

      function stepPan(direction) {
        const target = modelViewer.getCameraTarget();
        const step = 0.7; // tweak as needed
        let x = target.x;
        let y = target.y;
        let z = target.z;

        switch (direction) {
          case "up":
            y += step;
            break;
          case "down":
            y -= step;
            break;
          case "left":
            x -= step;
            break;
          case "right":
            x += step;
            break;
        }

        modelViewer.cameraTarget = `${x}m ${y}m ${z}m`;
      }
  
      // Map data-key → button element
      const keyButtons = document.querySelectorAll(".helper-key");
      const keyMap = new Map();
      keyButtons.forEach((btn) => {
        const key = btn.dataset.key;
        if (key) keyMap.set(key.toLowerCase(), btn);

        // Click actions for onscreen keys
        btn.addEventListener("click", () => {
          const k = key.toLowerCase();
          if (k === "r") {
            resetCamera();
          } else if (k === "arrowleft") {
            stepOrbit("left");
          } else if (k === "arrowright") {
            stepOrbit("right");
          } else if (k === "arrowup") {
            stepOrbit("up");
          } else if (k === "arrowdown") {
            stepOrbit("down");
          } else if (k === "-") {
            stepZoom( 2 );
          } else if (k === "+") {
            stepZoom( -2 );
          } else if (k === "w") {
            stepPan("up");
          } else if (k === "s") {
            stepPan("down");
          } else if (k === "a") {
            stepPan("left");
          } else if (k === "d") {
            stepPan("right");
          }
        });
      });

      // Keyboard → visual + behavior
      window.addEventListener("keydown", (event) => {
        const k = event.key;
        const lower = k.toLowerCase();
        const btn = keyMap.get(lower) || keyMap.get(k); // handles ArrowLeft, etc.

        if (btn) {
          btn.classList.add("is-pressed");
        }

        // Behaviors for real keys:
        if (lower === "r") {
          resetCamera();
        } else if (lower === "w") {
          stepPan("up");
        } else if (lower === "s") {
          stepPan("down");
        } else if (lower === "a") {
          stepPan("left");
        } else if (lower === "d") {
          stepPan("right");
        } else if (k === "-" || lower === "-") {
          stepZoom(-2);
        } else if (k === "+" || k === "=") {
          // "=" is often the key used with Shift to get "+"
          stepZoom(2);
        }
        // Arrow keys: let <model-viewer> handle rotation natively;
        // we only animate the caps visually.
      });

      window.addEventListener("keyup", (event) => {
        const k = event.key;
        const lower = k.toLowerCase();
        const btn = keyMap.get(lower) || keyMap.get(k);
        if (btn) {
          btn.classList.remove("is-pressed");
        }
      });
    </script>    
</body>
</html>
