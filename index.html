<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Onion House</title>
    <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.3.0/model-viewer.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background-color: #EBFBFF;
            color: #333;
            line-height: 1.6;
            margin: 0;
            padding: 0;
            overflow: hidden;
            height: 100vh;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 60px 20px;
        }

        /* Breadcrumbs */
        .breadcrumbs {
            margin-bottom: 30px;
            font-size: 14px;
        }

        .breadcrumbs a {
            color: #006FFF;
            text-decoration: none;
        }

        .breadcrumbs a:hover {
            text-decoration: underline;
        }

        .breadcrumbs span {
            margin: 0 8px;
            color: #999;
        }

        .columns {
            display: flex;
            gap: 220px;
            align-items: flex-start;
        }

        .column {
          flex: 1;
          min-width: 0;
        }    

        .interaction-helper {
          position: fixed;
          top: 12px;
          left: 50%;
          transform: translateX(-50%);
          display: flex;
          align-items: center;
          gap: 20px;
          padding: 8px 16px;
          border-radius: 999px;
          background: rgba(255, 255, 255, 0.6); /* lighter, more transparent */
          border: 1px solid rgba(255, 255, 255, 0.9);
          box-shadow: 0 6px 18px rgba(0, 0, 0, 0.16); /* softer shadow */
          backdrop-filter: blur(14px) saturate(1.1);
          -webkit-backdrop-filter: blur(14px) saturate(1.1);
          z-index: 3;
        }

        /* keep Mouse + Keyboard sections horizontal */
        .helper-section {
          display: flex;
          align-items: center;
          gap: 10px;
        }

        .helper-divider {
          width: 1px;
          align-self: stretch;
          background: linear-gradient(
            to bottom,
            rgba(0, 0, 0, 0),
            rgba(0, 0, 0, 0.25),
            rgba(0, 0, 0, 0)
          );
          margin: 0 4px;
        }

        .helper-label {
          font-size: 11px;
          text-transform: uppercase;
          letter-spacing: 1px;
          font-weight: 600;
          color: #444; /* darker for contrast */
        }

        .helper-row {
          display: flex;
          align-items: center;
          gap: 6px;
        }

        .helper-icon {
          font-size: 14px;
        }

        .helper-text {
          display: flex;
          flex-direction: column;
          font-size: 11px;
          line-height: 1.3;
          color: #222; /* readable on light bg */
        }

        .helper-action {
          font-weight: 600;
        }

        .helper-desc {
          opacity: 0.8;
        }

        .helper-keys {
          display: inline-flex;
          align-items: center;
          gap: 4px;
        }

        /* keycaps: lighter, subtler shadow */
        .helper-key {
          min-width: 26px;
          height: 26px;
          padding: 0 6px;
          border-radius: 6px;
          border: 1px solid rgba(0, 0, 0, 0.18);
          background: radial-gradient(circle at top left, #ffffff, #e0e7ff);
          box-shadow: 0 2px 0 rgba(0, 0, 0, 0.2);
          display: inline-flex;
          align-items: center;
          justify-content: center;
          font-family: inherit;
          font-size: 11px;
          font-weight: 600;
          color: #111;
          cursor: pointer;
          transition: transform 0.1s ease, box-shadow 0.1s ease, background 0.1s ease;
        }

        .helper-key:hover {
          background: radial-gradient(circle at top left, #ffffff, #d7e0ff);
        }

        .helper-key:active,
        .helper-key.is-pressed {
          transform: translateY(1px);
          box-shadow: 0 1px 0 rgba(0, 0, 0, 0.25);
          background: radial-gradient(circle at bottom right, #f0f2ff, #ced7ff);
        }

        .helper-key:focus-visible {
          outline: 2px solid #006fff;
          outline-offset: 2px;
        }
        
        @media (max-width: 768px) {
          .columns {
            flex-direction: column;
            gap: 8px;
          }
            
          .container {
            padding: 8px 16px 8px;  
          }

          .column p {
            margin-bottom: 10px;
          }

          header {
            margin-bottom: 10px;
          }
            
          h1 {
            font-size: 32px;
          }

          .description,
          .column p {
            font-size: 14px;
          }  
            
          .columns .column:nth-child(2) {
            display: none;
          } 
            
          .interaction-helper {
            display: none;
          }      
        }
        
        /* Header */
        header {
            margin-bottom: 10px;
        }

        h1,
        .inline-heading {
          font-size: 42px;
          font-weight: 400;
          line-height: 1.2;  
          letter-spacing: 2px;
          color: #000;
        }

        .inline-heading {
          display: inline;
          margin: 0;
        }

        .description {
            font-family: "SF Mono", Menlo, Monaco, "Courier New", monospace;
            font-weight: 100;
            font-size: 14px;
            line-height: 1.6;
            color: #555;
            margin-bottom: 30px;
        }

        .column p {
            font-family: "SF Mono", Menlo, Monaco, "Courier New", monospace;
            font-weight: 100;
            font-size: 14px;
            line-height: 1.6;
            color: #555;
            margin-bottom: 10px;
        }

        .columns .column:nth-child(2) p {
          text-align: right;
        }

        .homepage-center {
          display: flex;
          align-items: center;      /* vertical centering */
          justify-content: center;  /* optional: horizontal centering */
          min-height: 100vh;        /* make the container fill the viewport */
          z-index: 0;
          position: relative;
          pointer-events: none;     /* keeps your model clickable */
        }

        /* Model Viewer */
        model-viewer {
            background-color: transparent;
        }

        /* Hotspot Styles */
        .hotspot {
            background: white;
            border-radius: 24px;
            padding: 12px 20px;
            display: flex;
            align-items: center;
            gap: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            text-decoration: none;
            color: inherit;
            min-width: 200px;
        }

        .hotspot:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);
        }

        .hotspot-content {
            flex: 1;
            text-align: left;
        }

        .hotspot-category {
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 4px;
            font-weight: 600;
        }

        .hotspot-title {
            font-size: 14px;
            font-weight: 500;
        }

        .hotspot-arrow {
            font-size: 18px;
            font-weight: 300;
        }

        .hotspot.calm .hotspot-category {
            color: #006FFF;
        }

        .hotspot.cognitive .hotspot-category {
            color: #7300FF;
        }

        .hotspot.resilience .hotspot-category {
            color: #FF0000;
        }

        /* Content Section */
        .content-section {
            margin: 60px 0;
        }

        .content-section h2 {
            font-size: 32px;
            font-weight: 300;
            margin-bottom: 20px;
            text-align: center;
        }

        .long-description {
            max-width: 800px;
            margin: 0 auto 40px;
            font-size: 16px;
            line-height: 1.8;
            color: #555;
        }

        /* Image Placeholders */
        .image-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 40px;
        }

        .image-placeholder {
            background-color: #D0D0D0;
            aspect-ratio: 16/9;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #888;
            font-size: 14px;
        }

        /* Footer */
        footer {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            text-align: center;
            padding: 40px 20px;
            margin-top: 80px;
            border-top: none; /* previously 1px solid rgba(0, 0, 0, 0.1) */
            font-size: 14px;
            font-weight: 200;
            color: #666;
            pointer-events: none;
            z-index: 1;
        }

        /* Layer-specific backgrounds */
        body.calm-layer {
            background: linear-gradient(135deg, #EBFBFF 0%, rgba(0, 111, 255, 0.1) 100%);
        }

        body.cognitive-layer {
            background: linear-gradient(135deg, #EBFBFF 0%, rgba(115, 0, 255, 0.15) 100%);
        }

        body.resilience-layer {
            background: linear-gradient(135deg, #EBFBFF 0%, rgba(255, 0, 0, 0.2) 100%);
        }

        /* Back Link */
        .back-link {
            display: inline-block;
            margin-bottom: 30px;
            color: #006FFF;
            text-decoration: none;
            font-size: 14px;
        }

        .back-link:hover {
            text-decoration: underline;
        }
    </style>
</head>
    
<body>
      <!-- Desktop interaction helper -->
  <div class="interaction-helper" aria-label="Desktop controls">
    <div class="helper-section">
      <span class="helper-label">Mouse</span>

      <div class="helper-row">
        <span class="helper-icon">üñ±Ô∏è</span>
        <div class="helper-text">
          <span class="helper-action">Rotate</span>
          <span class="helper-desc">Left-click + drag</span>
        </div>
      </div>

      <div class="helper-row">
        <span class="helper-icon">üñ±Ô∏è</span>
        <div class="helper-text">
          <span class="helper-action">Zoom</span>
          <span class="helper-desc">Scroll wheel / pinch</span>
        </div>
      </div>

      <div class="helper-row">
        <span class="helper-icon">üñ±Ô∏è</span>
        <div class="helper-text">
          <span class="helper-action">Pan</span>
          <span class="helper-desc">Right-click + drag</span>
        </div>
      </div>
    </div>

    <div class="helper-divider"></div>

    <div class="helper-section">
      <span class="helper-label">Keyboard</span>

      <div class="helper-row">
        <div class="helper-keys">
          <button class="helper-key" type="button" data-key="ArrowLeft">‚Üê</button>
          <button class="helper-key" type="button" data-key="ArrowUp">‚Üë</button>
          <button class="helper-key" type="button" data-key="ArrowDown">‚Üì</button>
          <button class="helper-key" type="button" data-key="ArrowRight">‚Üí</button>
        </div>
        <div class="helper-text">
          <span class="helper-action">Rotate</span>
          <span class="helper-desc">Arrow keys</span>
        </div>
      </div>

      <div class="helper-row">
        <div class="helper-keys">
          <button class="helper-key" type="button" data-key="r">R</button>
        </div>
        <div class="helper-text">
          <span class="helper-action">Reset view</span>
          <span class="helper-desc">Press R</span>
        </div>
      </div>
    </div>
  </div>
    
    <div class="container homepage-center">
      <div class="columns">
        <div class="column">  

        <p>
            The Onion House is a spatial design concept that explores the future of our relationship with technology, specifically in the context of our homes. It's rooted in the idea of extremes, and introduces 3 layers that are linked together with interstitial spaces: 
            (1) the Calm Periphery,
            (2) the Cognitive Lab, and
            (3) the Resilience Core. 
            </p>
        
        <p>
            <span class="inline-heading"> The Onion House.</span> The outer layer embraces invisible technology and natural materials. Digital and mechanical systems operate seamlessly in the background, creating an environment of calm technology where interfaces disappear and human experience takes center stage. 
            Natural materials like wood, stone, and living plants create a biophilic sanctuary. Technology remains at the periphery of attention‚Äîambient, responsive, but never demanding. The space harnesses the inherent power of its physical form.
            </p>
       </div>
        
       <div class="column">
        <p>
            The middle layer inverts this logic, making digital technology visible and central. This workspace features 3D projections, interactive screens, and minimal distractions to support deep focus and analytical thinking. 
            </p>    
        <p>       
           <span class="inline-heading"> Spatial Layers.</span> Large projection surfaces transform walls into dynamic workspaces. The environment is minimalist by design‚Äînothing competes for attention except the work itself. Direct exterior access maintains the cognitive state required for focused work. 
                At the core lies a refuge from digital technology‚Äîa fail-safe zone with accessible mechanical systems and independent life support. This is the operational headquarters, protected by outer layers, functioning when all else fails. Basic, reliable, and self-sufficient.
            </p>
       </div>
      </div>   
    </div>
    
    <footer style="position: fixed; bottom: 0; left: 0; width: 100%; z-index: 2; background: transparent;">
        ¬© Liza Karimova
    </footer>
    
    <model-viewer 
            src="model.glb"
            camera-controls 
            touch-action="none"
            auto-rotate
            environment-image="legacy"
            exposure="2"
            shadow-intensity="0.5"
            shadow-softness="1"
            tone-mapping="agx"
            camera-orbit="45deg 75deg 30m"
            min-camera-orbit="auto auto 5m"
            max-camera-orbit="auto auto 100m"
            style="position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; z-index: 1;"
            alt="Onion House 3D Model">
           
        <!-- Calm Outer Layer Hotspot -->
            <a href="calm-outer-layer.html" class="hotspot calm" slot="hotspot-1" data-position="3m 3m 3m" data-normal="0m 1m 0m">
                <div class="hotspot-content">
                    <div class="hotspot-category">Calm Outer Layer</div>
                    <div class="hotspot-title">View</div>
                </div>
                <span class="hotspot-arrow">‚Üí</span>
            </a>

            <!-- Cognitive Immersion Layer Hotspot -->
            <a href="cognitive-immersion-layer.html" class="hotspot cognitive" slot="hotspot-2" data-position="0m 0m 3m" data-normal="0m 1m 0m">
                <div class="hotspot-content">
                    <div class="hotspot-category">Cognitive Immersion Layer</div>
                    <div class="hotspot-title">View</div>
                </div>
                <span class="hotspot-arrow">‚Üí</span>
            </a>

            <!-- Resilience Core Layer Hotspot -->
            <a href="resilience-core-layer.html" class="hotspot resilience" slot="hotspot-3" data-position="-3m -3m 3m" data-normal="0m 1m 0m">
                <div class="hotspot-content">
                    <div class="hotspot-category">Resilience Core Layer</div>
                    <div class="hotspot-title">View</div>
                </div>
                <span class="hotspot-arrow">‚Üí</span>
            </a>
        </model-viewer>
    <script>
        const modelViewer = document.querySelector('model-viewer');

        let initialOrbit, initialTarget, initialFov;

        modelViewer.addEventListener('load', () => {
            const orbit = modelViewer.getCameraOrbit();
            const target = modelViewer.getCameraTarget();
            initialOrbit = `${orbit.theta}rad ${orbit.phi}rad ${orbit.radius}m`;
            initialTarget = `${target.x}m ${target.y}m ${target.z}m`;
            initialFov = modelViewer.getFieldOfView();
          });

      function resetCamera() {
        if (!initialOrbit) return;
        modelViewer.cameraOrbit = initialOrbit;
        modelViewer.cameraTarget = initialTarget;
        modelViewer.fieldOfView = initialFov;
        // no jumpCameraToGoal() ‚Üí smoother interpolation with interpolation-decay
      }

      function stepOrbit(direction) {
        const orbit = modelViewer.getCameraOrbit();
        const stepAngle = 0.25; // radians (~14¬∞)
        const stepTilt = 0.2;

        let theta = orbit.theta;
        let phi = orbit.phi;
        const radius = orbit.radius;

        switch (direction) {
          case "left":
            theta -= stepAngle;
            break;
          case "right":
            theta += stepAngle;
            break;
          case "up":
            phi = Math.max(0.1, phi - stepTilt);
            break;
          case "down":
            phi = Math.min(Math.PI - 0.1, phi + stepTilt);
            break;
        }

        modelViewer.cameraOrbit = `${theta}rad ${phi}rad ${radius}m`;
      }

      // Map data-key ‚Üí button element
      const keyButtons = document.querySelectorAll(".helper-key");
      const keyMap = new Map();
      keyButtons.forEach((btn) => {
        const key = btn.dataset.key;
        if (key) keyMap.set(key.toLowerCase(), btn);

        // Click actions for onscreen keys
        btn.addEventListener("click", () => {
          const k = key.toLowerCase();
          if (k === "r") {
            resetCamera();
          } else if (k === "arrowleft") {
            stepOrbit("left");
          } else if (k === "arrowright") {
            stepOrbit("right");
          } else if (k === "arrowup") {
            stepOrbit("up");
          } else if (k === "arrowdown") {
            stepOrbit("down");
          }
        });
      });

      // Keyboard ‚Üí visual + behavior
      window.addEventListener("keydown", (event) => {
        const k = event.key;
        const lower = k.toLowerCase();
        const btn = keyMap.get(lower) || keyMap.get(k); // handles ArrowLeft, etc.

        if (btn) {
          btn.classList.add("is-pressed");
        }

        // Only custom behavior is for R (reset).
        if (lower === "r") {
          resetCamera();
        }
        // Arrow keys are already handled by model-viewer natively for rotation.
      });

      window.addEventListener("keyup", (event) => {
        const k = event.key;
        const lower = k.toLowerCase();
        const btn = keyMap.get(lower) || keyMap.get(k);
        if (btn) {
          btn.classList.remove("is-pressed");
        }
      });
    </script>    
</body>
</html>
